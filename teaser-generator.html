<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deal Teaser Generator — SyndicatePro</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --bg: #0a0a0f;
      --bg-panel: #13131a;
      --bg-card: #1a1a24;
      --bg-hover: #252533;
      --accent: #8b5cf6;
      --accent-2: #06b6d4;
      --success: #22c55e;
      --text: #f8fafc;
      --text-muted: #64748b;
      --border: rgba(255,255,255,0.06);
      --radius: 16px;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
    h1, h2, h3 { font-family: 'Space Grotesk', sans-serif; }
    .app { display: flex; min-height: 100vh; }
    
    .sidebar { width: 260px; background: var(--bg-panel); border-right: 1px solid var(--border); position: fixed; height: 100vh; }
    .sidebar-header { padding: 24px; border-bottom: 1px solid var(--border); }
    .logo { display: flex; align-items: center; gap: 12px; }
    .logo-mark { width: 40px; height: 40px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
    .logo span { font-family: 'Space Grotesk'; font-weight: 700; font-size: 1.25rem; }
    .nav { padding: 16px 12px; }
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; color: var(--text-muted); text-decoration: none; border-radius: 10px; font-size: 14px; margin: 2px 0; transition: all 0.15s; }
    .nav-item:hover { background: var(--bg-hover); color: var(--text); }
    .nav-item.active { background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(6,182,212,0.1)); color: var(--text); border: 1px solid rgba(139,92,246,0.3); }
    .nav-item i { width: 20px; text-align: center; }
    
    .main { flex: 1; margin-left: 260px; }
    .header { display: flex; justify-content: space-between; align-items: center; padding: 20px 32px; border-bottom: 1px solid var(--border); background: var(--bg-panel); }
    .btn { padding: 10px 20px; border-radius: 10px; border: none; cursor: pointer; font-size: 14px; font-weight: 500; display: flex; align-items: center; gap: 8px; transition: all 0.15s; }
    .btn-primary { background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: white; }
    .btn-ghost { background: var(--bg-card); border: 1px solid var(--border); color: var(--text-muted); }
    
    .content { padding: 32px; max-width: 1400px; display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }
    
    /* Form Side */
    .form-panel { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; }
    .panel-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 24px; }
    .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
    .form-group { display: flex; flex-direction: column; gap: 6px; }
    .form-group label { font-size: 12px; text-transform: uppercase; color: var(--text-muted); }
    .form-group input, .form-group select, .form-group textarea { padding: 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--bg); color: var(--text); font-size: 14px; }
    .form-group textarea { min-height: 80px; resize: vertical; }
    .form-group.full-width { grid-column: 1 / -1; }
    
    /* Preview Side */
    .preview-panel { background: white; border-radius: var(--radius); overflow: hidden; color: #1a1a2e; }
    .teaser-header { background: linear-gradient(135deg, #1a1a2e, #16213e); color: white; padding: 40px; }
    .teaser-logo { font-family: 'Space Grotesk'; font-size: 1.5rem; font-weight: 700; margin-bottom: 24px; }
    .teaser-logo span { color: #a855f7; }
    .teaser-title { font-size: 2rem; font-weight: 700; margin-bottom: 12px; }
    .teaser-subtitle { font-size: 1.1rem; opacity: 0.8; }
    .teaser-highlights { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 30px 40px; background: #f8fafc; border-bottom: 1px solid #e2e8f0; }
    .highlight { text-align: center; }
    .highlight-value { font-family: 'Space Grotesk'; font-size: 1.75rem; font-weight: 700; color: #a855f7; }
    .highlight-label { font-size: 12px; color: #64748b; text-transform: uppercase; margin-top: 4px; }
    .teaser-body { padding: 40px; }
    .teaser-section { margin-bottom: 32px; }
    .teaser-section h3 { font-size: 1.1rem; margin-bottom: 12px; color: #1a1a2e; }
    .teaser-section p { font-size: 14px; line-height: 1.7; color: #475569; }
    .metrics-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .metric { background: #f8fafc; padding: 16px; border-radius: 10px; }
    .metric-label { font-size: 11px; text-transform: uppercase; color: #64748b; margin-bottom: 4px; }
    .metric-value { font-family: 'Space Grotesk'; font-size: 1.25rem; font-weight: 600; }
    .teaser-footer { background: #f8fafc; padding: 24px 40px; display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #e2e8f0; }
    .contact-info { font-size: 13px; color: #64748b; }
    .contact-info strong { color: #1a1a2e; }
    .cta-btn { background: linear-gradient(135deg, #a855f7, #7c3aed); color: white; padding: 14px 28px; border-radius: 10px; border: none; font-weight: 600; cursor: pointer; }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="logo-mark"><i class="fas fa-building"></i></div>
          <span>SyndicatePro</span>
        </div>
      </div>
      <nav class="nav">
        <a href="dashboard-v2.html" class="nav-item"><i class="fas fa-th-large"></i> Dashboard</a>
        <a href="teaser-generator.html" class="nav-item active"><i class="fas fa-file-alt"></i> Teaser Generator</a>
        <a href="documents.html" class="nav-item"><i class="fas fa-file-contract"></i> Documents</a>
      </nav>
    </aside>
    
    <main class="main">
      <header class="header">
        <div>
          <h1 style="font-size: 1.4rem;">Deal Teaser Generator</h1>
          <p style="font-size: 14px; color: var(--text-muted); margin-top: 4px;">Create one-page investment summaries</p>
        </div>
        <div style="display: flex; gap: 12px;">
          <button class="btn btn-ghost"><i class="fas fa-eye"></i> Preview</button>
          <button class="btn btn-primary"><i class="fas fa-download"></i> Download PDF</button>
          <button class="btn btn-primary"><i class="fas fa-envelope"></i> Email to Investors</button>
        </div>
      </header>
      
      <div class="content">
        <!-- Form -->
        <div class="form-panel">
          <h2 class="panel-title">Deal Information</h2>
          <div class="form-grid">
            <div class="form-group">
              <label>Deal Name</label>
              <input type="text" value="Arlington Heights Multifamily" id="dealName">
            </div>
            <div class="form-group">
              <label>Location</label>
              <input type="text" value="Dallas, TX" id="location">
            </div>
            <div class="form-group">
              <label>Property Type</label>
              <select id="propertyType">
                <option>Multifamily</option>
                <option>Retail</option>
                <option>Office</option>
                <option>Industrial</option>
                <option>Self-Storage</option>
              </select>
            </div>
            <div class="form-group">
              <label>Total Raise</label>
              <input type="text" value="$2,500,000" id="totalRaise">
            </div>
            <div class="form-group">
              <label>Min Investment</label>
              <input type="text" value="$100,000" id="minInvestment">
            </div>
            <div class="form-group">
              <label>Target IRR</label>
              <input type="text" value="18%" id="targetIRR">
            </div>
            <div class="form-group">
              <label>Cash-on-Cash</label>
              <input type="text" value="8-10%" id="cashOnCash">
            </div>
            <div class="form-group">
              <label>Hold Period</label>
              <input type="text" value="5 Years" id="holdPeriod">
            </div>
            <div class="form-group full-width">
              <label>Investment Highlights</label>
              <textarea id="highlights">• 84-unit Class B multifamily in Dallas Uptown
• 94% occupied with strong rent growth (12% YoY)
• Value-add opportunity: renovate 40 units, increase rents $200/unit
• Below-market acquisition: $95K/door vs $120K comps</textarea>
            </div>
            <div class="form-group full-width">
              <label>Business Plan</label>
              <textarea id="businessPlan">Execute light value-add renovation on 40 vacant and turnover units. Upgrade kitchens, flooring, and fixtures to achieve $200/month rent premiums. Target 95% stabilized occupancy by Month 12.</textarea>
            </div>
          </div>
        </div>
        
        <!-- Preview -->
        <div class="preview-panel" id="preview">
          <div class="teaser-header">
            <div class="teaser-logo">Syndicate<span>Pro</span> Investments</div>
            <h1 class="teaser-title" id="previewTitle">Arlington Heights Multifamily</h1>
            <p class="teaser-subtitle" id="previewSubtitle">Exclusive Investment Opportunity • Dallas, TX</p>
          </div>
          <div class="teaser-highlights">
            <div class="highlight">
              <div class="highlight-value" id="previewRaise">$2.5M</div>
              <div class="highlight-label">Total Raise</div>
            </div>
            <div class="highlight">
              <div class="highlight-value" id="previewIRR">18%</div>
              <div class="highlight-label">Target IRR</div>
            </div>
            <div class="highlight">
              <div class="highlight-value" id="previewCash">8-10%</div>
              <div class="highlight-label">Cash-on-Cash</div>
            </div>
            <div class="highlight">
              <div class="highlight-value" id="previewHold">5 Yrs</div>
              <div class="highlight-label">Hold Period</div>
            </div>
          </div>
          <div class="teaser-body">
            <div class="teaser-section">
              <h3><i class="fas fa-star" style="color: #a855f7; margin-right: 8px;"></i>Investment Highlights</h3>
              <p id="previewHighlights">• 84-unit Class B multifamily in Dallas Uptown<br>
              • 94% occupied with strong rent growth (12% YoY)<br>
              • Value-add opportunity: renovate 40 units, increase rents $200/unit<br>
              • Below-market acquisition: $95K/door vs $120K comps</p>
            </div>
            <div class="teaser-section">
              <h3><i class="fas fa-chart-line" style="color: #a855f7; margin-right: 8px;"></i>Key Metrics</h3>
              <div class="metrics-grid">
                <div class="metric">
                  <div class="metric-label">Units</div>
                  <div class="metric-value">84</div>
                </div>
                <div class="metric">
                  <div class="metric-label">Occupancy</div>
                  <div class="metric-value">94%</div>
                </div>
                <div class="metric">
                  <div class="metric-label">Min Investment</div>
                  <div class="metric-value">$100K</div>
                </div>
              </div>
            </div>
            <div class="teaser-section">
              <h3><i class="fas fa-lightbulb" style="color: #a855f7; margin-right: 8px;"></i>Business Plan</h3>
              <p id="previewPlan">Execute light value-add renovation on 40 vacant and turnover units. Upgrade kitchens, flooring, and fixtures to achieve $200/month rent premiums. Target 95% stabilized occupancy by Month 12.</p>
            </div>
          </div>
          <div class="teaser-footer">
            <div class="contact-info">
              <strong>Pike Capital Management</strong><br>
              contact@pikecapital.com • (555) 123-4567
            </div>
            <button class="cta-btn">Request Full Offering</button>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <script src="js/sp-core.js"></script>
  <script>
    SP.requireGP();

    // Inject deal loader at top of form
    window.addEventListener('DOMContentLoaded', function() {
      const deals = SP.getDeals();
      if (deals.length) {
        const formPanel = document.querySelector('.form-panel, .sidebar-form, form, .inputs');
        if (formPanel) {
          const loaderDiv = document.createElement('div');
          loaderDiv.style.cssText = 'margin-bottom:20px;padding:14px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;';
          loaderDiv.innerHTML = `
            <label style="display:block;font-size:.8rem;font-weight:600;color:#64748b;margin-bottom:8px;"><i class="fas fa-bolt" style="color:#3b82f6;margin-right:4px;"></i> Load from Existing Deal</label>
            <div style="display:flex;gap:8px;">
              <select id="teaserDealSelect" style="flex:1;padding:9px 12px;border:1px solid #e2e8f0;border-radius:8px;font-family:'Inter',sans-serif;font-size:.875rem;outline:none;">
                <option value="">— Pick a deal —</option>
                ${deals.map(d=>`<option value="${d.id}">${d.name}</option>`).join('')}
              </select>
              <button onclick="loadDealIntoTeaser()" style="padding:9px 14px;background:#3b82f6;color:white;border:none;border-radius:8px;cursor:pointer;font-family:'Inter',sans-serif;font-size:.875rem;font-weight:600;">Auto-fill</button>
            </div>`;
          formPanel.insertBefore(loaderDiv, formPanel.firstChild);
        }
      }
    });

    function loadDealIntoTeaser() {
      const sel = document.getElementById('teaserDealSelect');
      if (!sel?.value) return;
      const deal = SP.getDealById(sel.value);
      if (!deal) return;

      const fmt$ = n => n >= 1e6 ? '$'+(n/1e6).toFixed(1)+'M' : n >= 1e3 ? '$'+(n/1e3).toFixed(0)+'K' : '$'+(n||0);

      // Fill form fields
      const set = (id, val) => { const el = document.getElementById(id); if (el) el.value = val; };
      set('dealName', deal.name || '');
      set('location', deal.location || '');
      set('totalRaise', fmt$(deal.raise || 0));
      set('targetIRR', deal.irr ? deal.irr.toFixed(1)+'%' : '');
      set('cashOnCash', deal.irr ? (deal.irr * 0.45).toFixed(1)+'%' : '');
      set('holdPeriod', '5 Yrs');

      // Update preview
      ['dealName','location','totalRaise','targetIRR','cashOnCash','holdPeriod'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.dispatchEvent(new Event('input'));
      });

      // Update preview title/subtitle directly
      const pt = document.getElementById('previewTitle');
      const ps = document.getElementById('previewSubtitle');
      if (pt) pt.textContent = deal.name;
      if (ps) ps.textContent = `Exclusive Investment Opportunity • ${deal.location||''}`;

      SP.logActivity('fa-file-alt', 'amber', `Teaser generated for <strong>${deal.name}</strong>`);
    }

    // Live preview updates
    const liveMap = {
      dealName: 'previewTitle',
      location: el => { const ps = document.getElementById('previewSubtitle'); if(ps) ps.textContent = `Exclusive Investment Opportunity • ${el.value||'Location'}`; },
      totalRaise: 'previewRaise',
      targetIRR: 'previewIRR',
      cashOnCash: 'previewCash',
      holdPeriod: 'previewHold',
    };

    Object.entries(liveMap).forEach(([inputId, targetOrFn]) => {
      const el = document.getElementById(inputId);
      if (!el) return;
      el.addEventListener('input', (e) => {
        if (typeof targetOrFn === 'function') { targetOrFn(e.target); return; }
        const t = document.getElementById(targetOrFn);
        if (t) t.textContent = e.target.value || '—';
      });
    });

    const hl = document.getElementById('highlights');
    if (hl) hl.addEventListener('input', e => { const p = document.getElementById('previewHighlights'); if(p) p.innerHTML = e.target.value.replace(/\n/g,'<br>'); });
    const bp = document.getElementById('businessPlan');
    if (bp) bp.addEventListener('input', e => { const p = document.getElementById('previewPlan'); if(p) p.textContent = e.target.value; });

    // PDF export
    function exportTeaserPDF() {
      window.print();
    }
  </script>
</body>
</html>