<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SyndicatePro - Document Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #1a1a2e;
      --secondary: #16213e;
      --accent: #0f3460;
      --highlight: #e94560;
      --success: #00d9a3;
      --warning: #f39c12;
      --text: #eaeaea;
      --text-muted: #a0a0a0;
      --border: #2a2a4a;
      --card: #1e1e3a;
      --input: #252545;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', sans-serif;
      background: var(--primary);
      color: var(--text);
      min-height: 100vh;
    }
    
    .header {
      background: var(--secondary);
      border-bottom: 1px solid var(--border);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--highlight);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .logo::before { content: "‚óÜ"; color: var(--success); }
    
    .nav { display: flex; gap: 1.5rem; }
    .nav a { color: var(--text-muted); text-decoration: none; font-weight: 500; }
    .nav a:hover, .nav a.active { color: var(--text); }
    
    .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
    
    .page-title { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
    .page-subtitle { color: var(--text-muted); margin-bottom: 2rem; }
    
    .grid { display: grid; grid-template-columns: 320px 1fr; gap: 2rem; }
    @media (max-width: 1024px) { .grid { grid-template-columns: 1fr; } }
    
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }
    
    .card-title { font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem; }
    
    .doc-type-list { display: flex; flex-direction: column; gap: 0.75rem; }
    
    .doc-type {
      background: var(--input);
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .doc-type:hover { border-color: var(--accent); }
    .doc-type.selected { border-color: var(--highlight); background: rgba(233, 69, 96, 0.1); }
    .doc-type .icon { font-size: 1.5rem; }
    .doc-type .info { flex: 1; }
    .doc-type .name { font-weight: 600; }
    .doc-type .desc { font-size: 0.8rem; color: var(--text-muted); }
    
    .form-group { margin-bottom: 1.25rem; }
    label { display: block; font-size: 0.875rem; font-weight: 500; color: var(--text-muted); margin-bottom: 0.5rem; }
    input, select, textarea {
      width: 100%;
      background: var(--input);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem 1rem;
      color: var(--text);
      font-size: 1rem;
      font-family: inherit;
    }
    input:focus, select:focus, textarea:focus { outline: none; border-color: var(--highlight); }
    textarea { min-height: 100px; resize: vertical; }
    
    .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    
    .btn {
      background: var(--highlight);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0.875rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    .btn:hover { background: #d63d56; }
    .btn-secondary { background: var(--accent); }
    .btn-secondary:hover { background: #1a4a7a; }
    .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--text); }
    .btn-outline:hover { background: var(--input); }
    .btn-success { background: var(--success); color: var(--primary); }
    .btn-success:hover { background: #00c090; }
    
    .preview-panel {
      background: white;
      color: #333;
      border-radius: 8px;
      padding: 2rem;
      max-height: 600px;
      overflow-y: auto;
      font-family: 'Times New Roman', serif;
      line-height: 1.6;
    }
    
    .preview-panel h1 { font-size: 1.5rem; text-align: center; margin-bottom: 1.5rem; }
    .preview-panel h2 { font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.75rem; border-bottom: 1px solid #ccc; padding-bottom: 0.25rem; }
    .preview-panel p { margin-bottom: 0.75rem; text-align: justify; }
    .preview-panel .section { margin-bottom: 1rem; }
    .preview-panel .signature-line { border-bottom: 1px solid #333; width: 300px; margin: 2rem 0 0.25rem; }
    .preview-panel .signature-label { font-size: 0.9rem; color: #666; }
    
    .progress-steps {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }
    .step {
      flex: 1;
      padding: 0.5rem;
      text-align: center;
      background: var(--input);
      border-radius: 6px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }
    .step.active { background: var(--highlight); color: white; }
    .step.complete { background: var(--success); color: var(--primary); }
    
    .tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
    .tab { padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-weight: 500; }
    .tab:hover { background: var(--input); }
    .tab.active { background: var(--highlight); color: white; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    
    .deal-import { background: var(--input); border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem; }
    .deal-import label { margin-bottom: 0.75rem; }
    
    .template-section { margin-bottom: 1.5rem; }
    .template-section-title { font-weight: 600; margin-bottom: 0.75rem; color: var(--success); }
    
    .variable-tag {
      display: inline-flex;
      align-items: center;
      background: var(--accent);
      color: var(--text);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-family: 'JetBrains Mono', monospace;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .empty-state {
      text-align: center;
      padding: 3rem;
      color: var(--text-muted);
    }
    .empty-state .icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.5; }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">SyndicatePro</div>
    <nav class="nav">
      <a href="index.html">Deal Modeling</a>
      <a href="documents.html" class="active">Documents</a>
      <a href="#">Investors</a>
      <a href="#">Reports</a>
    </nav>
  </header>

  <div class="container">
    <h1 class="page-title">Document Generator</h1>
    <p class="page-subtitle">Generate syndication documents from your deal terms</p>
    
    <div class="progress-steps">
      <div class="step active" data-step="1">1. Select Document</div>
      <div class="step" data-step="2">2. Import Deal Data</div>
      <div class="step" data-step="3">3. Fill Details</div>
      <div class="step" data-step="4">4. Generate & Export</div>
    </div>
    
    <div class="grid">
      <div class="left-panel">
        <div class="card">
          <div class="card-header">
            <div class="card-title">üìÑ Document Type</div>
          </div>
          
          <div class="doc-type-list">
            <div class="doc-type selected" data-type="operating-agreement">
              <div class="icon">‚öñÔ∏è</div>
              <div class="info">
                <div class="name">LLC Operating Agreement</div>
                <div class="desc">Multi-member LLC structure with waterfall provisions</div>
              </div>
            </div>
            <div class="doc-type" data-type="lp-agreement">
              <div class="icon">üìã</div>
              <div class="info">
                <div class="name">Limited Partnership Agreement</div>
                <div class="desc">LP structure with GP/LP split terms</div>
              </div>
            </div>
            <div class="doc-type" data-type="ppm">
              <div class="icon">üìä</div>
              <div class="info">
                <div class="name">Private Placement Memorandum</div>
                <div class="desc">SEC-compliant offering document</div>
              </div>
            </div>
            <div class="doc-type" data-type="subscription">
              <div class="icon">‚úçÔ∏è</div>
              <div class="info">
                <div class="name">Subscription Agreement</div>
                <div class="desc">Investor subscription documents</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card" style="margin-top: 1rem;">
          <div class="card-header">
            <div class="card-title">üîó Import Deal</div>
          </div>
          <div class="deal-import">
            <label>Select saved deal to populate variables:</label>
            <select id="dealSelect">
              <option value="">-- Select a deal --</option>
            </select>
          </div>
          <button class="btn btn-secondary" onclick="importDealData()" style="width: 100%;">
            Import Deal Variables
          </button>
        </div>
      </div>
      
      <div class="right-panel">
        <div class="card" id="formCard">
          <div class="card-header">
            <div class="card-title">‚úèÔ∏è Document Details</div>
          </div>
          
          <div class="tabs">
            <div class="tab active" data-tab="entity">Entity Info</div>
            <div class="tab" data-tab="terms">Deal Terms</div>
            <div class="tab" data-tab="parties">Parties</div>
            <div class="tab" data-tab="preview">Preview</div>
          </div>
          
          <div class="tab-content active" id="tab-entity">
            <div class="template-section">
              <div class="template-section-title">Company Information</div>
              <div class="input-row">
                <div class="form-group">
                  <label>Company Name <span class="variable-tag">{{COMPANY_NAME}}</span></label>
                  <input type="text" id="companyName" placeholder="ABC Capital, LLC">
                </div>
                <div class="form-group">
                  <label>State of Formation <span class="variable-tag">{{STATE}}</span></label>
                  <select id="state">
                    <option value="DE">Delaware</option>
                    <option value="TX">Texas</option>
                    <option value="CA">California</option>
                    <option value="NY">New York</option>
                    <option value="FL">Florida</option>
                    <option value="NV">Nevada</option>
                    <option value="WY">Wyoming</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label>Principal Address <span class="variable-tag">{{ADDRESS}}</span></label>
                <input type="text" id="address" placeholder="123 Main St, City, State 12345">
              </div>
            </div>
            
            <div class="template-section">
              <div class="template-section-title">Property Information</div>
              <div class="form-group">
                <label>Property Address <span class="variable-tag">{{PROPERTY_ADDRESS}}</span></label>
                <input type="text" id="propertyAddress" placeholder="456 Oak Avenue, Austin, TX 78701">
              </div>
              <div class="input-row">
                <div class="form-group">
                  <label>Property Type</label>
                  <select id="propertyType">
                    <option value="multifamily">Multifamily</option>
                    <option value="office">Office</option>
                    <option value="retail">Retail</option>
                    <option value="industrial">Industrial</option>
                    <option value="self-storage">Self-Storage</option>
                    <option value="hotel">Hotel</option>
                    <option value="mixed-use">Mixed-Use</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Number of Units</label>
                  <input type="number" id="units" placeholder="100">
                </div>
              </div>
            </div>
          </div>
          
          <div class="tab-content" id="tab-terms">
            <div class="template-section">
              <div class="template-section-title">Capital Structure <span class="variable-tag">{{TOTAL_EQUITY}}</span></div>
              <div class="input-row">
                <div class="form-group">
                  <label>Total Equity Raise</label>
                  <input type="number" id="totalEquity" placeholder="5000000">
                </div>
                <div class="form-group">
                  <label>Minimum Investment</label>
                  <input type="number" id="minInvestment" placeholder="50000">
                </div>
              </div>
            </div>
            
            <div class="template-section">
              <div class="template-section-title">Waterfall Terms</div>
              <div class="input-row">
                <div class="form-group">
                  <label>Preferred Return % <span class="variable-tag">{{PREF_RETURN}}</span></label>
                  <input type="number" id="prefReturn" placeholder="8" step="0.5">
                </div>
                <div class="form-group">
                  <label>GP Promote % <span class="variable-tag">{{GP_PROMOTE}}</span></label>
                  <input type="number" id="gpPromote" placeholder="30">
                </div>
              </div>
              <div class="input-row">
                <div class="form-group">
                  <label>GP Equity % <span class="variable-tag">{{GP_EQUITY}}</span></label>
                  <input type="number" id="gpEquity" placeholder="10">
                </div>
                <div class="form-group">
                  <label>LP Equity % <span class="variable-tag">{{LP_EQUITY}}</span></label>
                  <input type="number" id="lpEquity" placeholder="90" readonly>
                </div>
              </div>
              <div class="form-group">
                <label>Catch-Up Provision <span class="variable-tag">{{CATCHUP_RATE}}</span></label>
                <select id="catchupProvision">
                  <option value="none">No Catch-Up</option>
                  <option value="50">50/50 Catch-Up</option>
                  <option value="100">100% to GP Until Promote Share</option>
                </select>
              </div>
            </div>
            
            <div class="template-section">
              <div class="template-section-title">Fees <span class="variable-tag">{{ACQ_FEE}} {{ASSET_MGMT_FEE}}</span></div>
              <div class="input-row">
                <div class="form-group">
                  <label>Acquisition Fee %</label>
                  <input type="number" id="acqFee" placeholder="3" step="0.5">
                </div>
                <div class="form-group">
                  <label>Asset Mgmt Fee %</label>
                  <input type="number" id="assetMgmtFee" placeholder="2" step="0.5">
                </div>
              </div>
              <div class="input-row">
                <div class="form-group">
                  <label>Disposition Fee %</label>
                  <input type="number" id="dispFee" placeholder="2" step="0.5">
                </div>
                <div class="form-group">
                  <label>Refinance Fee %</label>
                  <input type="number" id="refiFee" placeholder="1" step="0.5">
                </div>
              </div>
            </div>
          </div>
          
          <div class="tab-content" id="tab-parties">
            <div class="template-section">
              <div class="template-section-title">General Partner / Manager <span class="variable-tag">{{GP_NAME}}</span></div>
              <div class="input-row">
                <div class="form-group">
                  <label>GP Entity Name</label>
                  <input type="text" id="gpName" placeholder="ABC Capital GP, LLC">
                </div>
                <div class="form-group">
                  <label>GP Representative</label>
                  <input type="text" id="gpRep" placeholder="John Smith">
                </div>
              </div>
              <div class="form-group">
                <label>GP Address</label>
                <input type="text" id="gpAddress" placeholder="GP mailing address">
              </div>
            </div>
            
            <div class="template-section">
              <div class="template-section-title">Managing Members</div>
              <div id="memberList"></div>
              <button class="btn btn-outline" onclick="addMember()" style="margin-top: 0.5rem;">
                + Add Managing Member
              </button>
            </div>
            
            <div class="template-section">
              <div class="template-section-title">Key Personnel</div>
              <div class="input-row">
                <div class="form-group">
                  <label>Asset Manager</label>
                  <input type="text" id="assetManager" placeholder="Name">
                </div>
                <div class="form-group">
                  <label>Property Manager</label>
                  <input type="text" id="propertyManager" placeholder="Company Name">
                </div>
              </div>
            </div>
          </div>
          
          <div class="tab-content" id="tab-preview">
            <div class="empty-state" id="previewEmpty">
              <div class="icon">üëÅÔ∏è</div>
              <h3>Preview will appear here</h3>
              <p>Fill in document details and click Generate Preview</p>
            </div>
            <div id="previewContent" style="display: none;">
              <div class="preview-panel" id="documentPreview"></div>
              <div style="margin-top: 1rem; display: flex; gap: 0.75rem;">
                <button class="btn btn-success" onclick="exportPDF()">üìÑ Export PDF</button>
                <button class="btn btn-secondary" onclick="exportWord()">üìù Export Word</button>
                <button class="btn btn-outline" onclick="exportHTML()">üíæ Save HTML</button>
              </div>
            </div>
          </div>
          
          <div style="margin-top: 1.5rem; display: flex; gap: 0.75rem;">
            <button class="btn" onclick="generatePreview()" id="previewBtn">üëÅÔ∏è Generate Preview</button>
            <button class="btn btn-outline" onclick="saveDraft()">üíæ Save Draft</button>
            <button class="btn btn-secondary" onclick="loadTemplate()">üìÇ Load Template</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let currentDocType = 'operating-agreement';
    let members = [];
    
    // Load saved deals
    function loadSavedDeals() {
      const deals = JSON.parse(localStorage.getItem('syndicateDeals') || '[]');
      const select = document.getElementById('dealSelect');
      select.innerHTML = '<option value="">-- Select a deal --</option>';
      deals.forEach(deal => {
        const option = document.createElement('option');
        option.value = deal.id;
        option.textContent = deal.name || 'Unnamed Deal';
        select.appendChild(option);
      });
    }
    
    // Import deal data
    function importDealData() {
      const dealId = document.getElementById('dealSelect').value;
      if (!dealId) return;
      
      const deals = JSON.parse(localStorage.getItem('syndicateDeals') || '[]');
      const deal = deals.find(d => d.id === dealId);
      if (!deal) return;
      
      // Populate fields
      document.getElementById('totalEquity').value = deal.totalEquity || '';
      document.getElementById('prefReturn').value = deal.prefReturn || '';
      document.getElementById('gpPromote').value = deal.gpPromote || '';
      document.getElementById('gpEquity').value = deal.gpEquity || '';
      document.getElementById('lpEquity').value = 100 - (deal.gpEquity || 0);
      
      alert('Deal data imported successfully!');
    }
    
    // Document type selection
    document.querySelectorAll('.doc-type').forEach(type => {
      type.addEventListener('click', () => {
        document.querySelectorAll('.doc-type').forEach(t => t.classList.remove('selected'));
        type.classList.add('selected');
        currentDocType = type.dataset.type;
      });
    });
    
    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(`tab-${tab.dataset.tab}`).classList.add('active');
      });
    });
    
    // Auto-calculate LP equity
    document.getElementById('gpEquity').addEventListener('input', (e) => {
      const gp = parseFloat(e.target.value) || 0;
      document.getElementById('lpEquity').value = Math.max(0, 100 - gp);
    });
    
    function addMember() {
      const name = prompt('Enter member name:');
      if (!name) return;
      const contribution = prompt('Initial capital contribution ($):') || '0';
      
      members.push({ name, contribution: parseFloat(contribution) });
      renderMembers();
    }
    
    function renderMembers() {
      const container = document.getElementById('memberList');
      container.innerHTML = members.map((m, i) => `
        <div style="background: var(--input); padding: 0.75rem; border-radius: 6px; margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
          <span>${m.name} <span style="color: var(--text-muted);">($${m.contribution.toLocaleString()})</span></span>
          <span style="cursor: pointer; color: var(--highlight);" onclick="removeMember(${i})">‚úï</span>
        </div>
      `).join('');
    }
    
    function removeMember(index) {
      members.splice(index, 1);
      renderMembers();
    }
    
    function getFormData() {
      return {
        companyName: document.getElementById('companyName').value,
        state: document.getElementById('state').value,
        address: document.getElementById('address').value,
        propertyAddress: document.getElementById('propertyAddress').value,
        totalEquity: document.getElementById('totalEquity').value,
        minInvestment: document.getElementById('minInvestment').value,
        prefReturn: document.getElementById('prefReturn').value,
        gpPromote: document.getElementById('gpPromote').value,
        gpEquity: document.getElementById('gpEquity').value,
        lpEquity: document.getElementById('lpEquity').value,
        acqFee: document.getElementById('acqFee').value,
        assetMgmtFee: document.getElementById('assetMgmtFee').value,
        gpName: document.getElementById('gpName').value,
        gpRep: document.getElementById('gpRep').value,
        members: members
      };
    }
    
    function generateOperatingAgreement(data) {
      return `
<h1>OPERATING AGREEMENT</h1>
<p style="text-align: center; font-style: italic;">${data.companyName || '[COMPANY NAME]'}</p>
<p style="text-align: center;">A ${data.state || '[STATE]'} Limited Liability Company</p>

<div class="section">
<p>THIS OPERATING AGREEMENT (this "Agreement") is entered into as of ${new Date().toLocaleDateString()}, by and among the Members listed on Schedule A attached hereto (collectively, the "Members" and each individually, a "Member").</p>
</div>

<h2>ARTICLE I - FORMATION</h2>
<div class="section">
<p><strong>1.1 Formation.</strong> The Members hereby form a limited liability company pursuant to the provisions of the ${data.state || '[STATE]'} Limited Liability Company Act (the "Act").</p>

<p><strong>1.2 Name.</strong> The name of the Company shall be ${data.companyName || '[COMPANY NAME]'}. The business of the Company may be conducted under that name or any other name as determined by the Managing Member.</p>

<p><strong>1.3 Principal Office.</strong> The principal office of the Company shall be located at ${data.address || '[ADDRESS]'} or such other place as the Managing Member may from time to time designate.</p>

<p><strong>1.4 Purpose.</strong> The purpose of the Company is to acquire, own, operate, improve, lease, manage, finance, refinance, and dispose of real property located at ${data.propertyAddress || '[PROPERTY ADDRESS]'} (the "Property"), and to engage in any and all activities necessary or incidental thereto.</p>
</div>

<h2>ARTICLE II - CAPITAL CONTRIBUTIONS</h2>
<div class="section">
<p><strong>2.1 Initial Contributions.</strong> The Members shall make initial capital contributions to the Company as set forth on Schedule A.</p>

<p><strong>2.2 Total Capitalization.</strong> The total equity capitalization of the Company shall be $${parseFloat(data.totalEquity || 0).toLocaleString()}.</p>

<p><strong>2.3 Minimum Investment.</strong> No Member shall contribute less than $${parseFloat(data.minInvestment || 0).toLocaleString()} as an initial capital contribution.</p>
</div>

<h2>ARTICLE III - ALLOCATIONS AND DISTRIBUTIONS</h2>
<div class="section">
<p><strong>3.1 Allocations.</strong> Except as otherwise provided herein, all Profits and Losses of the Company shall be allocated to the Members in proportion to their respective Percentage Interests.</p>

<p><strong>3.2 Distributions - Waterfall.</strong> Distributable Cash shall be distributed to the Members in the following order of priority:</p>

<p>(a) <strong>First,</strong> to all Members in proportion to their Unreturned Capital Contributions until each Member has received distributions equal to their total Capital Contributions;</p>

<p>(b) <strong>Second,</strong> to the Limited Partners until they have received an ${data.prefReturn || '[8]'}% annual preferred return on their Unreturned Capital Contributions, calculated from the date of each Capital Contribution;</p>

<p>(c) <strong>Third,</strong> ${data.gpPromote >= 20 ? 'to the General Partner as a "catch-up" payment until the General Partner has received distributions equal to the Promote Percentage of all prior distributions under (a) and (b) above;' : '[Catch-up provision if applicable]'}</p>

<p>(d) <strong>Thereafter,</strong> ${data.gpPromote || '[20]'}% to the General Partner and ${100 - (data.gpPromote || 20)}% to the Limited Partners.</p>
</div>

<h2>ARTICLE IV - MANAGEMENT</h2>
<div class="section">
<p><strong>4.1 Managing Member.</strong> ${data.gpName || '[GP ENTITY]'} shall be the Managing Member of the Company and shall have full, exclusive, and complete authority to manage and control the business and affairs of the Company.</p>

<p><strong>4.2 Limited Members.</strong> Limited Members shall have no right to participate in the management or control of the Company.</p>
</div>

<h2>ARTICLE V - FEES</h2>
<div class="section">
<p><strong>5.1 Acquisition Fee.</strong> The Managing Member shall be entitled to an acquisition fee equal to ${data.acqFee || '[3]'}% of the purchase price of the Property.</p>

<p><strong>5.2 Asset Management Fee.</strong> The Managing Member shall be entitled to an annual asset management fee equal to ${data.assetMgmtFee || '[2]'}% of the gross revenues of the Property.</p>

<p><strong>5.3 Disposition Fee.</strong> Upon sale or refinancing of the Property, the Managing Member shall be entitled to a disposition fee equal to ${data.dispFee || '[2]'}% of the gross sale price or loan amount.</p>
</div>

<h2>ARTICLE VI - TRANSFER RESTRICTIONS</h2>
<div class="section">
<p><strong>6.1 General Restriction.</strong> No Member may Transfer all or any portion of its Interest in the Company without the prior written consent of the Managing Member.</p>
</div>

<h2>SIGNATURES</h2>
<div class="section">
<p>IN WITNESS WHEREOF, the Members have executed this Agreement as of the date first written above.</p>

${members.map(m => `
<div class="signature-line"></div>
<p class="signature-label">${m.name}, Member</p>
<p class="signature-label">Date: _______________</p>
<br>
`).join('')}

<div class="signature-line"></div>
<p class="signature-label">${data.gpRep || '[GP REPRESENTATIVE]'}, Managing Member</p>
<p class="signature-label">${data.gpName || '[GP ENTITY]'}</p>
<p class="signature-label">Date: _______________</p>
</div>
      `;
    }
    
    function generatePPM(data) {
      return `
<h1>PRIVATE PLACEMENT MEMORANDUM</h1>
<p style="text-align: center; font-size: 1.2rem; font-weight: bold;">${data.companyName || '[COMPANY NAME]'}</p>
<p style="text-align: center;">$${parseFloat(data.totalEquity || 0).toLocaleString()} Limited Liability Company Interests</p>
<p style="text-align: center; color: #c00; font-weight: bold;">$${parseFloat(data.minInvestment || 0).toLocaleString()} Minimum Investment</p>

<div class="section">
<p style="text-align: center; font-weight: bold; border: 2px solid #c00; padding: 1rem; margin: 1rem 0;">
THESE SECURITIES HAVE NOT BEEN REGISTERED UNDER THE SECURITIES ACT OF 1933, AS AMENDED, OR THE SECURITIES LAWS OF ANY STATE. THESE SECURITIES ARE BEING OFFERED PURSUANT TO AN EXEMPTION FROM REGISTRATION UNDER REGULATION D PROMULGATED UNDER THE SECURITIES ACT.
</p>
</div>

<h2>SUMMARY OF THE OFFERING</h2>
<div class="section">
<table style="width: 100%; border-collapse: collapse;">
<tr><td style="padding: 0.5rem; border: 1px solid #ccc;"><strong>Issuer:</strong></td><td style="padding: 0.5rem; border: 1px solid #ccc;">${data.companyName || '[COMPANY NAME]'}</td></tr>
<tr><td style="padding: 0.5rem; border: 1px solid #ccc;"><strong>Securities Offered:</strong></td><td style="padding: 0.5rem; border: 1px solid #ccc;">Limited Liability Company Interests</td></tr>
<tr><td style="padding: 0.5rem; border: 1px solid #ccc;"><strong>Offering Amount:</strong></td><td style="padding: 0.5rem; border: 1px solid #ccc;">Up to $${parseFloat(data.totalEquity || 0).toLocaleString()}</td></tr>
<tr><td style="padding: 0.5rem; border: 1px solid #ccc;"><strong>Minimum Investment:</strong></td><td style="padding: 0.5rem; border: 1px solid #ccc;">$${parseFloat(data.minInvestment || 50000).toLocaleString()}</td></tr>
<tr><td style="padding: 0.5rem; border: 1px solid #ccc;"><strong>Preferred Return:</strong></td><td style="padding: 0.5rem; border: 1px solid #ccc;">${data.prefReturn || '8'}% annualized</td></tr>
<tr><td style="padding: 0.5rem; border: 1px solid #ccc;"><strong>GP Promote:</strong></td><td style="padding: 0.5rem; border: 1px solid #ccc;">${data.gpPromote || '20'}% after preferred return</td></tr>
<tr><td style="padding: 0.5rem; border: 1px solid #ccc;"><strong>Sponsor:</strong></td><td style="padding: 0.5rem; border: 1px solid #ccc;">${data.gpName || '[GP ENTITY]'}</td></tr>
</table>
</div>

<h2>RISK FACTORS</h2>
<div class="section">
<p>An investment in the Company involves substantial risks. Prospective investors should carefully consider the following risk factors before investing:</p>

<p><strong>1. No Public Market.</strong> The Interests will not be registered under the Securities Act and will be "restricted securities." There is no public market for the Interests, and none is expected to develop.</p>

<p><strong>2. Illiquidity.</strong> The Interests are highly illiquid. Investors should be prepared to hold their investment for the entire hold period, which is expected to be 5-7 years.</p>

<p><strong>3. Real Estate Risk.</strong> The investment is subject to all risks inherent in real estate investments, including market fluctuations, tenant defaults, and economic downturns.</p>

<p><strong>4. Leverage Risk.</strong> The Company intends to use leverage to finance the acquisition of the Property, which amplifies both potential returns and potential losses.</p>

<p><strong>5. Dependence on Sponsor.</strong> The success of the investment depends heavily on the expertise and continued involvement of the Sponsor, ${data.gpName || '[GP ENTITY]'}.</p>
</div>

<h2>USE OF PROCEEDS</h2>
<div class="section">
<p>The net proceeds from this Offering will be used primarily for:</p>
<ul>
<li>Acquisition of the Property located at ${data.propertyAddress || '[PROPERTY ADDRESS]'}</li>
<li>Closing costs and acquisition expenses</li>
<li>Capital improvements and reserves</li>
<li>Working capital and organizational expenses</li>
</ul>
</div>

<h2>FEES AND COMPENSATION</h2>
<div class="section">
<p>The Managing Member and its affiliates will receive the following fees:</p>
<ul>
<li><strong>Acquisition Fee:</strong> ${data.acqFee || '3'}% of purchase price</li>
<li><strong>Asset Management Fee:</strong> ${data.assetMgmtFee || '2'}% of gross revenues annually</li>
<li><strong>Disposition Fee:</strong> ${data.dispFee || '2'}% of gross sale price</li>
</ul>
</div>
      `;
    }
    
    function generatePreview() {
      const data = getFormData();
      let content = '';
      
      switch(currentDocType) {
        case 'operating-agreement':
          content = generateOperatingAgreement(data);
          break;
        case 'lp-agreement':
          content = generateOperatingAgreement(data).replace(/Limited Liability Company/g, 'Limited Partnership').replace(/Managing Member/g, 'General Partner').replace(/Members/g, 'Limited Partners');
          break;
        case 'ppm':
          content = generatePPM(data);
          break;
        default:
          content = '<p>Document template not yet implemented.</p>';
      }
      
      document.getElementById('previewEmpty').style.display = 'none';
      document.getElementById('previewContent').style.display = 'block';
      document.getElementById('documentPreview').innerHTML = content;
      
      // Switch to preview tab
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      document.querySelector('[data-tab="preview"]').classList.add('active');
      document.getElementById('tab-preview').classList.add('active');
    }
    
    function exportPDF() {
      alert('PDF export would integrate with a library like jsPDF or server-side PDF generation');
    }
    
    function exportWord() {
      const content = document.getElementById('documentPreview').innerHTML;
      const blob = new Blob(['<html><head><meta charset="UTF-8"></head><body>' + content + '</body></html>'], { type: 'application/msword' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${currentDocType}-${new Date().toISOString().split('T')[0]}.doc`;
      a.click();
    }
    
    function exportHTML() {
      const content = document.getElementById('documentPreview').innerHTML;
      const blob = new Blob([content], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${currentDocType}-${new Date().toISOString().split('T')[0]}.html`;
      a.click();
    }
    
    function saveDraft() {
      const data = getFormData();
      data.docType = currentDocType;
      data.savedAt = new Date().toISOString();
      
      const drafts = JSON.parse(localStorage.getItem('documentDrafts') || '[]');
      drafts.push(data);
      localStorage.setItem('documentDrafts', JSON.stringify(drafts));
      
      alert('Draft saved successfully!');
    }
    
    function loadTemplate() {
      alert('Template library would show saved document templates here');
    }
    
    // Initialize
    loadSavedDeals();
  </script>
</body>
</html>